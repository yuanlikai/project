webpackJsonp([4],{"2Prd":function(e,t){},"B1/z":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){var e=this;return{defaultList:[],imgName:"",visible:!1,uploadList:[],state:0,modal2:!1,imgSrc:"",hou_size_id:"",formValidate:{hou_names:"",hou_ses_content:"",hou_ses_pic:"",hou_ses_name:"",hou_size_id:"",hou_ses_area:"",hou_ses_price:"",hou_ses_feat:"",hou_ses_look:"",hou_ses_tel:""},poist:[],ruleValidate:{hou_ses_name:[{required:!0,message:"未填写户型名称",trigger:"blur"}],hou_size_id:[{required:!0,message:"未选择户型",trigger:"change"}],hou_ses_area:[{required:!0,message:"未填写面积",trigger:"blur"}],hou_ses_price:[{required:!0,message:"未填写总价",trigger:"blur"}],hou_ses_feat:[{required:!0,message:"未填写特色",trigger:"blur"}],hou_ses_look:[{required:!0,message:"未选择朝向",trigger:"change"}],hou_ses_content:[{required:!0,message:"未填写户型介绍",trigger:"blur"}],hou_ses_tel:[{required:!0,message:"未填写联系电话",trigger:"blur"}],hou_ses_pic:[{required:!0,validator:function(t,s,a){1!==e.uploadList.length?a(new Error("请选择1张图片")):a()},trigger:"change"}]},modal1:!1,pag:1,loading2:!0,loading1:!0,total:0,columns1:[{title:"ID",width:80,align:"center",key:"hou_ses_id"},{title:"户型名称",key:"hou_ses_name"},{title:"户型图",align:"center",render:function(t,s){return t("div",[t("img",{attrs:{src:"http://img.gsfzd.com/"+s.row.hou_ses_pic},style:{width:"30px",cursor:"pointer"},on:{click:function(){e.modal2=!0,e.imgSrc="http://img.gsfzd.com/"+s.row.hou_ses_pic}}})])}},{title:"面积",key:"hou_ses_area",render:function(e,t){return e("div",[e("p",t.row.hou_ses_area+"m²")])}},{title:"单价",key:"hou_ses_price",render:function(e,t){return e("div",[e("p",t.row.hou_ses_price+"元")])}},{title:"朝向",key:"hou_ses_look"},{title:"特色",key:"hou_ses_feat"},{title:"咨询电话",key:"hou_ses_tel"},{title:"规格",key:"hou_size_info"},{title:"户型介绍",key:"hou_ses_content"},{title:"操作",align:"center",width:100,render:function(t,s){return t("div",[t("Poptip",{props:{confirm:!0,transfer:!0,title:"是否继续删除该户型?"},on:{"on-ok":function(){var t=e;t.loading2=!0,t.Axios.post("/index.php/admin/hou/hxDel",t.Qs.stringify({hou_ses_id:s.row.hou_ses_id})).then(function(e,s){0===e.data.error?t.positList():t.$Message.error(e.data.errMsg)})}}},[t("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data1:[]}},methods:{shoale:function(){this.$refs.formValidate.resetFields(),this.$refs.upload.fileList.splice(0,1),this.state=0,this.spec(),this.modal1=!0,this.loading1=!0},handleSubmit:function(e){var t=this;console.log(this.uploadList[0]),this.$refs[e].validate(function(e){if(e){var s=t;s.Axios.post("/index.php/admin/hou/hxAdd",s.Qs.stringify({hou_ses_id:"",hou_id:s.$route.query.hou_id,hou_names:s.formValidate.hou_names,hou_ses_content:s.formValidate.hou_ses_content,hou_ses_pic:s.uploadList[0].response,hou_ses_name:s.formValidate.hou_ses_name,hou_size_id:s.formValidate.hou_size_id,hou_ses_area:s.formValidate.hou_ses_area,hou_ses_price:s.formValidate.hou_ses_price,hou_ses_feat:s.formValidate.hou_ses_feat,hou_ses_look:s.formValidate.hou_ses_look,hou_ses_tel:s.formValidate.hou_ses_tel})).then(function(e,t){0===e.data.error?(s.$Message.success("添加户型成功"),s.modal1=!1,s.positList(),s.$refs.formValidate.resetFields()):(s.$Message.error(e.data.errMsg),s.loading1=!1)})}else t.$Message.error("添加管理员账号失败!"),t.loading1=!1})},positList:function(){var e=this;e.loading2=!0,e.Axios.post("/index.php/admin/hou/hxIndex",e.Qs.stringify({hou_id:e.$route.query.hou_id,pag:e.pag,num:11})).then(function(t,s){e.loading2=!1,0===t.data.error?(e.data1=t.data.data.info,e.total=t.data.data.nodes):e.$Message.error(t.data.errMsg)})},page:function(e){this.pag=e,this.positList()},spec:function(){var e=this;e.Axios.post("/index.php/admin/hou/size").then(function(t,s){0===t.data.error?(console.log(t.data),e.poist=t.data.data):e.$Message.error(t.data.errMsg)})},handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){this.$refs.upload.fileList;this.$refs.upload.fileList.splice(0,1)},handleSuccess:function(e,t){t.url="http://img.gsfzd.com/"+e,t.name="7eb99afb9d5f317c912f08b5212fd69a"},handleFormatError:function(e){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+e.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(e){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+e.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var e=this.uploadList.length<1;return e||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),e},cancel:function(){this.$Message.info("你点击了取消")}},mounted:function(){this.uploadList=this.$refs.upload.fileList,this.positList()}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",{style:{padding:"0 16px 16px"}},[s("Breadcrumb",{style:{margin:"16px 0"}},[s("BreadcrumbItem",[e._v("开发商")]),e._v(" "),0==this.$route.query.hou_isadout?[s("BreadcrumbItem",{attrs:{to:"houses"}},[e._v("楼盘管理")]),e._v(" "),s("BreadcrumbItem",[e._v("楼盘名称："+e._s(this.$route.query.hou_names))])]:e._e(),e._v(" "),1==this.$route.query.hou_isadout?[s("BreadcrumbItem",{attrs:{to:"deve_To"}},[e._v("未审核楼盘")]),e._v(" "),s("BreadcrumbItem",[e._v("楼盘名称："+e._s(this.$route.query.hou_names))])]:e._e()],2),e._v(" "),s("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[s("Button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:function(t){e.shoale()}}},[s("Icon",{attrs:{type:"md-add"}}),e._v("\n      添加户型\n    ")],1),e._v(" "),s("Table",{attrs:{loading:e.loading2,columns:e.columns1,data:e.data1,height:"568",border:""}})],1),e._v(" "),s("div",{staticStyle:{float:"left",width:"100%","text-align":"center","margin-top":"25px"}},[s("Page",{attrs:{total:e.total,"page-size":11},on:{"on-change":e.page}})],1),e._v(" "),s("Modal",{attrs:{title:"请填写户型信息",loading:e.loading1,styles:{width:"420px"}},on:{"on-ok":function(t){e.handleSubmit("formValidate")},"on-cancel":e.cancel},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[s("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"户型名称",prop:"hou_ses_name"}},[s("Input",{attrs:{maxlength:18,placeholder:"填写户型名"},model:{value:e.formValidate.hou_ses_name,callback:function(t){e.$set(e.formValidate,"hou_ses_name",t)},expression:"formValidate.hou_ses_name"}})],1)],1),e._v(" "),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"户型",prop:"hou_size_id"}},[s("Select",{attrs:{placeholder:"请选择"},model:{value:e.formValidate.hou_size_id,callback:function(t){e.$set(e.formValidate,"hou_size_id",t)},expression:"formValidate.hou_size_id"}},e._l(e.poist,function(t,a){return s("Option",{key:a,attrs:{value:String(t.hou_size_id)}},[e._v("\n              "+e._s(t.hou_size_info)+"\n            ")])}))],1)],1),e._v(" "),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"面积(m²)",prop:"hou_ses_area"}},[s("Input",{attrs:{maxlength:18,placeholder:"填写面积"},model:{value:e.formValidate.hou_ses_area,callback:function(t){e.$set(e.formValidate,"hou_ses_area",t)},expression:"formValidate.hou_ses_area"}})],1)],1),e._v(" "),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"单价(¥)",prop:"hou_ses_price"}},[s("Input",{attrs:{maxlength:18,placeholder:"填写总价"},model:{value:e.formValidate.hou_ses_price,callback:function(t){e.$set(e.formValidate,"hou_ses_price",t)},expression:"formValidate.hou_ses_price"}})],1)],1),e._v(" "),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"特色",prop:"hou_ses_feat"}},[s("Input",{attrs:{maxlength:18,placeholder:"填写户型特色"},model:{value:e.formValidate.hou_ses_feat,callback:function(t){e.$set(e.formValidate,"hou_ses_feat",t)},expression:"formValidate.hou_ses_feat"}})],1)],1),e._v(" "),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"朝向",prop:"hou_ses_look"}},[s("Select",{attrs:{placeholder:"请选择"},model:{value:e.formValidate.hou_ses_look,callback:function(t){e.$set(e.formValidate,"hou_ses_look",t)},expression:"formValidate.hou_ses_look"}},[s("Option",{attrs:{value:"正南"}}),e._v(" "),s("Option",{attrs:{value:"东南"}}),e._v(" "),s("Option",{attrs:{value:"东"}}),e._v(" "),s("Option",{attrs:{value:"西南"}}),e._v(" "),s("Option",{attrs:{value:"北"}}),e._v(" "),s("Option",{attrs:{value:"西"}})],1)],1)],1),e._v(" "),s("Col",{attrs:{span:"24"}},[s("FormItem",{attrs:{label:"户型介绍",prop:"hou_ses_content"}},[s("Input",{attrs:{type:"textarea",placeholder:"填写户型介绍..."},model:{value:e.formValidate.hou_ses_content,callback:function(t){e.$set(e.formValidate,"hou_ses_content",t)},expression:"formValidate.hou_ses_content"}})],1)],1),e._v(" "),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"联系电话",prop:"hou_ses_tel"}},[s("Input",{attrs:{maxlength:18,placeholder:"填写联系电话"},model:{value:e.formValidate.hou_ses_tel,callback:function(t){e.$set(e.formValidate,"hou_ses_tel",t)},expression:"formValidate.hou_ses_tel"}})],1)],1),e._v(" "),s("Col",{attrs:{span:"24"}},[s("FormItem",{attrs:{label:"户型图上传",prop:"hou_ses_pic"}},[e._l(e.uploadList,function(t){return s("div",{staticClass:"demo-upload-list"},["finished"===t.status?[s("img",{attrs:{src:t.url}}),e._v(" "),s("div",{staticClass:"demo-upload-list-cover"},[s("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(s){e.handleView(t.url)}}},[e._v(e._s(t.name))]),e._v(" "),s("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(s){e.handleRemove(t)}}})],1)]:[t.showProgress?s("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),e._v(" "),s("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:"/publics/picture/imgouter",data:{location:"hou_ses"}}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[s("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],2)],1)],1)],1)],1),e._v(" "),s("Modal",{attrs:{title:"View Image",styles:{textAlign:"center"}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?s("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.imgName}}):e._e()]),e._v(" "),s("Modal",{attrs:{title:"View Image",styles:{textAlign:"center"}},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[s("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.imgSrc}})])],1)},staticRenderFns:[]};var i=s("VU/8")(a,o,!1,function(e){s("2Prd")},null,null);t.default=i.exports}});