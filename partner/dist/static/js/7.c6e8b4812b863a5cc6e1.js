webpackJsonp([7],{"gu+9":function(t,e){},vzYj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("rVKb"),i=a("BW8s"),n={components:{PagIng:o.a,alertDel:i.a},data:function(){var t=this;return{modal1:!1,loading1:!1,delContent:{url:"/index.php/partner/hou/del",id:""},spinShow:!1,total:1,formValidate:{name:"0",time:[]},ruleValidate:{name:[{required:!0,message:"请填写活动标题!",trigger:"blur"}],time:[{required:!0,validator:function(e,a,o){console.log(t.formValidate),t.formValidate.time[0].length<1?o(new Error("请选择日期")):o()},trigger:"change"}]},columns1:[{title:"id",width:80,align:"center",key:"hou_id"},{title:"楼盘名称",key:"hou_names"},{title:"楼盘地址",key:"hou_address"},{title:"均价(元/m²)",align:"center",key:"hou_pirce"},{title:"状态",align:"center",key:"hou_isadout",render:function(t,e){switch(e.row.hou_isadout){case 0:return t("p","已通过");case 1:return t("p",{style:{color:"#3590F1"}},"审核中");case 2:return t("p",{style:{color:"#F16646"}},"未通过")}}},{title:"操作",align:"center",key:"address",render:function(e,a){return e("div",{style:{cursor:"pointer"}},[e("span",{style:{color:"#37C57B",marginRight:"10px"},on:{click:function(){var e=t;e.hou_id=a.row.hou_id,e.modal1=!0,e.formValidate.time=[],e.formValidate.name="0",e.Axios.post("/index.php/admin/hou/cIndex",e.Qs.stringify({hou_id:a.row.hou_id})).then(function(t,a){0===t.data.error?0===t.data.data.length?e.hou_count_id="":(e.hou_count_id=t.data.data[0].hou_count_id,e.formValidate.name=String(t.data.data[0].hou_count_show),e.formValidate.time=[],e.formValidate.time.push(String(e.timestampToTime(t.data.data[0].hou_count_addtime))),e.formValidate.time.push(String(e.timestampToTime(t.data.data[0].hou_count_endtime)))):e.$Message.error(t.data.errMsg)})}}},"优惠"),e("span",{style:{color:"#3590F1",marginRight:"10px"},on:{click:function(){t.$router.push({name:"superiorAdd",query:{hou_id:a.row.hou_id}})}}},"详情"),e("span",{style:{color:"#FFAD36",marginRight:"10px"},on:{click:function(){t.$router.push({name:"deveType",query:{hou_id:a.row.hou_id,hou_names:a.row.hou_names,hou_isadout:a.row.hou_isadout}})}}},"户型"),e("span",{style:{color:"#F16646"},on:{click:function(e){t.delContent.id=a.row.hou_id,t.$refs.del.modal2=!0}}},"删除")])}}],data1:[]}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a=e,o=new Date(a.formValidate.time[0]).getTime()/1e3,i=new Date(a.formValidate.time[1]).getTime()/1e3;a.Axios.post("/index.php/admin/hou/cdd",a.Qs.stringify({hou_id:a.hou_id,hou_count_id:a.hou_count_id,hou_count_addtime:o,hou_count_endtime:i,hou_count_show:a.formValidate.name})).then(function(t,e){0===t.data.error?(a.modal1=!1,a.$Message.success(t.data.errMsg)):(a.$Message.error(t.data.errMsg),a.loading1=!1)})}else e.$Message.error("添加活动失败!"),e.loading1=!1})},del:function(t){this.total=t},cut:function(t){this.housesList(t)},housesList:function(t){var e=this;e.spinShow=!e.spinShow,e.Axios.post("/index.php/partner/hou/index",e.Qs.stringify({num:10,page:t})).then(function(t){0===t.data.error?(e.total=t.data.data.nodes,e.data1=t.data.data.info):e.$Message.error(t.data.errMsg),e.spinShow=!e.spinShow})},cancel:function(){this.$Message.info("你点击了取消")}},mounted:function(){this.housesList(1)}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Content",{style:{padding:"0 16px 16px"}},[a("Breadcrumb",{style:{margin:"16px 0"}},[a("BreadcrumbItem",[t._v("开发商")]),t._v(" "),a("BreadcrumbItem",[t._v("楼盘管理")])],1),t._v(" "),a("Card",[a("div",{staticStyle:{height:"570px"}},[a("Row",{staticStyle:{"margin-bottom":"16px"}},[a("Col",{attrs:{span:"12"}},[a("Button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:function(e){t.$router.push({name:"superiorAdd",query:{deve:"true"}})}}},[a("Icon",{attrs:{type:"md-add"}}),t._v("\n          添加开楼盘\n        ")],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Input",{staticStyle:{width:"300px",float:"right"},attrs:{search:"","enter-button":"",placeholder:"Enter something..."}})],1)],1),t._v(" "),a("Table",{attrs:{columns:t.columns1,data:t.data1}}),t._v(" "),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),t._v(" "),a("PagIng",{attrs:{page:t.total},on:{cut:t.cut}}),t._v(" "),a("alertDel",{ref:"del",attrs:{delContent:t.delContent},on:{List:t.housesList,delA:t.del}})],1),t._v(" "),a("Modal",{attrs:{title:"请认真填写优惠时间",loading:t.loading1,styles:{width:"420px"}},on:{"on-ok":function(e){t.handleSubmit("formValidate")},"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"优惠状态",prop:"name"}},[a("RadioGroup",{model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}},[a("Radio",{attrs:{label:"0"}},[t._v("展示")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("不展示")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"优惠时间",prop:"time"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{placement:"bottom-end",placeholder:"Select date",format:"yyyy/MM/dd",editable:!1,type:"daterange"},model:{value:t.formValidate.time,callback:function(e){t.$set(t.formValidate,"time",e)},expression:"formValidate.time"}})],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(n,r,!1,function(t){a("gu+9")},"data-v-782a7d71",null);e.default=d.exports}});