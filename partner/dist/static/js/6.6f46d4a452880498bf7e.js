webpackJsonp([6],{vzYj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("rVKb"),i=a("BW8s"),n={components:{PagIng:o.a,alertDel:i.a},data:function(){var e=this;return{modal1:!1,loading1:!1,delContent:{url:"/index.php/partner/hou/del",id:""},spinShow:!1,total:1,formValidate:{name:"0",time:[]},ruleValidate:{name:[{required:!0,message:"请填写活动标题!",trigger:"blur"}],time:[{required:!0,validator:function(t,a,o){console.log(e.formValidate),e.formValidate.time[0].length<1?o(new Error("请选择日期")):o()},trigger:"change"}]},columns1:[{title:"id",width:80,align:"center",key:"hou_id"},{title:"楼盘名称",key:"hou_names"},{title:"楼盘地址",key:"hou_address"},{title:"均价(元/m²)",align:"center",key:"hou_pirce"},{title:"状态",align:"center",key:"hou_isadout",render:function(e,t){switch(t.row.hou_isadout){case 0:return e("p","已通过");case 1:return e("p",{style:{color:"#3590F1"}},"审核中");case 2:return e("p",{style:{color:"#F16646"}},"未通过")}}},{title:"操作",align:"center",key:"address",render:function(t,a){return t("div",{style:{cursor:"pointer"}},[t("span",{style:{color:"#37C57B",marginRight:"10px"},on:{click:function(){var t=e;t.hou_id=a.row.hou_id,t.modal1=!0,t.formValidate.time=[],t.formValidate.name="0",t.Axios.post("/index.php/admin/hou/cIndex",t.Qs.stringify({hou_id:a.row.hou_id})).then(function(e,a){0===e.data.error?0===e.data.data.length?t.hou_count_id="":(t.hou_count_id=e.data.data[0].hou_count_id,t.formValidate.name=String(e.data.data[0].hou_count_show),t.formValidate.time=[],t.formValidate.time.push(String(t.timestampToTime(e.data.data[0].hou_count_addtime))),t.formValidate.time.push(String(t.timestampToTime(e.data.data[0].hou_count_endtime)))):t.$Message.error(e.data.errMsg)})}}},"优惠"),t("span",{style:{color:"#3590F1",marginRight:"10px"},on:{click:function(){e.$router.push({name:"superiorAdd",query:{hou_id:a.row.hou_id}})}}},"详情"),t("span",{style:{color:"#FFAD36",marginRight:"10px"},on:{click:function(){e.$router.push({name:"deveType",query:{hou_id:a.row.hou_id,hou_names:a.row.hou_names,hou_isadout:a.row.hou_isadout}})}}},"户型"),t("span",{style:{color:"#F16646"},on:{click:function(t){e.delContent.id=a.row.hou_id,e.$refs.del.modal2=!0}}},"删除")])}}],data1:[]}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t,o=new Date(a.formValidate.time[0]).getTime()/1e3,i=new Date(a.formValidate.time[1]).getTime()/1e3;a.Axios.post("/index.php/admin/hou/cdd",a.Qs.stringify({hou_id:a.hou_id,hou_count_id:a.hou_count_id,hou_count_addtime:o,hou_count_endtime:i,hou_count_show:a.formValidate.name})).then(function(e,t){0===e.data.error?(a.modal1=!1,a.$Message.success(e.data.errMsg)):(a.$Message.error(e.data.errMsg),a.loading1=!1)})}else t.$Message.error("添加活动失败!"),t.loading1=!1})},del:function(e){this.total=e},cut:function(e){this.housesList(e)},housesList:function(e){var t=this;t.spinShow=!t.spinShow,t.Axios.post("/index.php/partner/hou/index",t.Qs.stringify({num:10,page:e})).then(function(e){0===e.data.error?(t.total=e.data.data.nodes,t.data1=e.data.data.info):t.$Message.error(e.data.errMsg),t.spinShow=!t.spinShow})},cancel:function(){this.$Message.info("你点击了取消")}},mounted:function(){this.housesList(1)}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Content",{style:{padding:"0 16px 16px"}},[a("Breadcrumb",{style:{margin:"16px 0"}},[a("BreadcrumbItem",[e._v("开发商")]),e._v(" "),a("BreadcrumbItem",[e._v("楼盘管理")])],1),e._v(" "),a("Card",[a("div",{staticStyle:{height:"570px"}},[a("Row",{staticStyle:{"margin-bottom":"16px"}},[a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push({name:"superiorAdd",query:{deve:"true"}})}}},[a("Icon",{attrs:{type:"md-add"}}),e._v("\n          添加开楼盘\n        ")],1)],1),e._v(" "),a("Col",{attrs:{span:"12"}})],1),e._v(" "),a("Table",{attrs:{columns:e.columns1,data:e.data1}}),e._v(" "),e.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1),e._v(" "),a("PagIng",{attrs:{page:e.total},on:{cut:e.cut}}),e._v(" "),a("alertDel",{ref:"del",attrs:{delContent:e.delContent},on:{List:e.housesList,delA:e.del}})],1),e._v(" "),a("Modal",{attrs:{title:"请认真填写优惠时间",loading:e.loading1,styles:{width:"420px"}},on:{"on-ok":function(t){e.handleSubmit("formValidate")},"on-cancel":e.cancel},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"优惠状态",prop:"name"}},[a("RadioGroup",{model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}},[a("Radio",{attrs:{label:"0"}},[e._v("展示")]),e._v(" "),a("Radio",{attrs:{label:"1"}},[e._v("不展示")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"优惠时间",prop:"time"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{placement:"bottom-end",placeholder:"Select date",format:"yyyy/MM/dd",editable:!1,type:"daterange"},model:{value:e.formValidate.time,callback:function(t){e.$set(e.formValidate,"time",t)},expression:"formValidate.time"}})],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(n,r,!1,function(e){a("xIlX")},"data-v-e8f6fc54",null);t.default=d.exports},xIlX:function(e,t){}});