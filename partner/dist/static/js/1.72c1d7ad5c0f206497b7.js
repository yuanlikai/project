webpackJsonp([1],{"6VWu":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,a=r("bOdI"),o=r.n(a),i=r("mvHQ"),l=r.n(i),n={data:function(){var e=this;return{loading:!1,shows:!0,defaultList:[],imgName:"",visible:!1,uploadList:[],positLi:[],formValidate:{user_post_title:"",user_post_plot:"",city_id:"",user_address:"",user_post_room:1,ting:0,wei:0,user_post_type:"",user_post_area:0,user_post_pirce:0,user_post_adron:"",user_post_aspect:"",user_type_id:"",user_post_year:2e3,user_post_floors:0,user_post_floor:0,user_post_right:0,user_post_content:""},ruleValidate:{user_post_content:[{required:!0,message:"Please fill in the content.",trigger:"blur"}],user_type_id:[{required:!0,message:"Please fill in the content.",trigger:"change"}],user_post_year:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}],user_post_floor:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}],user_post_floors:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}],user_post_right:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}],user_post_pirce:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}],user_post_area:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}],imgUpload:[{required:!0,validator:function(t,r,s){e.uploadList.length<2?s(new Error("至少上传2张图片")):s()},trigger:"change"}],user_post_plot:[{required:!0,message:"Please fill in the content.",trigger:"blur"}],user_post_title:[{required:!0,message:"Please fill in the content.",trigger:"blur"}],city_id:[{required:!0,message:"Please fill in the content.",trigger:"change"}],user_address:[{required:!0,message:"Please fill in the content.",trigger:"blur"}],user_post_room:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}],ting:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}],wei:[{required:!0,type:"number",message:"Please fill in the content.",trigger:"blur"}]}}},methods:(s={handleSubmit:function(e){var t=this;t.$refs[e].validate(function(e){e?(t.loading=!0,t.Axios.post("/index.php/partner/agent/add",t.Qs.stringify({user_post_id:t.$route.query.id?t.$route.query.id:"",city_id:t.formValidate.city_id,user_agent:1,user_post_title:t.formValidate.user_post_title,user_post_plot:t.formValidate.user_post_plot,user_post_room:t.formValidate.user_post_room,user_post_type:t.formValidate.ting+","+t.formValidate.wei,user_post_area:t.formValidate.user_post_area,user_post_pirce:t.formValidate.user_post_pirce,user_post_adron:t.formValidate.user_post_adron,user_post_aspect:t.formValidate.user_post_aspect,user_type_id:t.formValidate.user_type_id,user_post_year:t.formValidate.user_post_year,user_post_floor:t.formValidate.user_post_floor,user_post_floors:t.formValidate.user_post_floors,user_post_content:t.formValidate.user_post_content,user_post_right:t.formValidate.user_post_right,user_address:t.formValidate.user_address,user_pics:String(l()(t.uploadList))})).then(function(e){0===e.data.error?(t.$Message.success("添加房源成功！"),t.$router.push({name:"brokerHouses"})):t.$Message.error(e.data.errMsg),t.loading=!1})):t.$Message.error("Fail!")})},handleReset:function(e){this.$refs[e].resetFields()},getHouses:function(){var e=this;e.Axios.post("/index.php/partner/agent/xiang",e.Qs.stringify({user_post_id:e.$route.query.id})).then(function(t){if(console.log(t.data.data),0===t.data.error){var r=t.data.data[0];e.formValidate.city_id=String(r.city_id),e.formValidate.user_post_title=r.user_post_title,e.formValidate.user_post_plot=r.user_post_plot,e.formValidate.user_address=r.user_address,e.formValidate.user_post_room=Number(r.user_post_room),e.formValidate.ting=Number(r.user_post_type.split(",")[0]),e.formValidate.wei=Number(r.user_post_type.split(",")[1]),e.formValidate.user_post_area=r.user_post_area,e.formValidate.user_post_pirce=r.user_post_pirce,e.formValidate.user_post_right=Number(r.user_post_right),e.formValidate.user_post_floors=Number(r.user_post_floors),e.formValidate.user_post_floor=Number(r.user_post_floor),e.formValidate.user_type_id=r.user_type_id,e.formValidate.user_post_year=r.user_post_year,e.formValidate.user_post_content=r.user_post_content,e.defaultList=JSON.parse(r.user_pics),setTimeout(function(){e.uploadList=e.$refs.upload.fileList},0)}else v.$Message.error(t.data.errMsg)})},city:function(){var e=this;e.Axios.post("/index.php/admin/banner/city").then(function(t,r){0===t.data.error?e.positLi=t.data.data:e.$Message.error(t.data.errMsg)})}},o()(s,"handleReset",function(e){this.$refs[e].resetFields()}),o()(s,"handleView",function(e){console.log(e),this.imgName=e,this.visible=!0}),o()(s,"handleRemove",function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)}),o()(s,"handleSuccess",function(e,t){console.log(e),t.url="http://img.gsfzd.com/"+e,t.name="7eb99afb9d5f317c912f08b5212fd69a",console.log(this.uploadList)}),o()(s,"handleFormatError",function(e){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+e.name+" is incorrect, please select jpg or png."})}),o()(s,"handleMaxSize",function(e){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+e.name+" is too large, no more than 2M."})}),o()(s,"handleBeforeUpload",function(){var e=this.uploadList.length<1e3;return e||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),e}),s),mounted:function(){this.getHouses(),this.city(),this.uploadList=this.$refs.upload.fileList}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Content",{style:{padding:"0 16px 16px"}},[r("Breadcrumb",{style:{margin:"16px 0"}},[r("BreadcrumbItem",[e._v("经纪人/中介")]),e._v(" "),r("BreadcrumbItem",[e._v("房源管理")]),e._v(" "),e.$route.query.id?r("BreadcrumbItem",[e._v("修改房源")]):r("BreadcrumbItem",[e._v("添加房源")])],1),e._v(" "),r("Card",[r("div",{staticStyle:{height:"570px"}},[r("Row",[r("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[r("Col",{attrs:{offset:"2",span:"9"}},[r("FormItem",{attrs:{label:"楼盘名称",prop:"user_post_title"}},[r("Input",{attrs:{placeholder:"请填写楼盘名称"},model:{value:e.formValidate.user_post_title,callback:function(t){e.$set(e.formValidate,"user_post_title",t)},expression:"formValidate.user_post_title"}})],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"9"}},[r("FormItem",{attrs:{label:"楼盘省份",prop:"city_id"}},[r("Select",{attrs:{placeholder:"请选择省份"},model:{value:e.formValidate.city_id,callback:function(t){e.$set(e.formValidate,"city_id",t)},expression:"formValidate.city_id"}},e._l(e.positLi,function(t,s){return r("Option",{key:s,attrs:{value:String(t.areaId)}},[e._v(e._s(t.areaName)+"\n                ")])}))],1)],1),e._v(" "),r("Col",{attrs:{span:"15"}},[r("FormItem",{attrs:{label:"楼盘地址",prop:"user_address"}},[r("Input",{attrs:{placeholder:"请填写详细地址"},model:{value:e.formValidate.user_address,callback:function(t){e.$set(e.formValidate,"user_address",t)},expression:"formValidate.user_address"}})],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"面积",prop:"user_post_area"}},[r("InputNumber",{attrs:{max:1e3,min:0,formatter:function(e){return e+"m²"},parser:function(e){return e.replace("m²","")}},model:{value:e.formValidate.user_post_area,callback:function(t){e.$set(e.formValidate,"user_post_area",t)},expression:"formValidate.user_post_area"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"总价",prop:"user_post_pirce"}},[r("InputNumber",{attrs:{max:1e4,min:0,formatter:function(e){return e+"万"},parser:function(e){return e.replace("万","")}},model:{value:e.formValidate.user_post_pirce,callback:function(t){e.$set(e.formValidate,"user_post_pirce",t)},expression:"formValidate.user_post_pirce"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"产权",prop:"user_post_right"}},[r("InputNumber",{attrs:{max:100,min:0,formatter:function(e){return e+"年"},parser:function(e){return e.replace("年","")}},model:{value:e.formValidate.user_post_right,callback:function(t){e.$set(e.formValidate,"user_post_right",t)},expression:"formValidate.user_post_right"}})],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"建筑类型",prop:"user_type_id"}},[r("Select",{attrs:{placeholder:"请选择建筑类型"},model:{value:e.formValidate.user_type_id,callback:function(t){e.$set(e.formValidate,"user_type_id",t)},expression:"formValidate.user_type_id"}},[r("Option",{attrs:{value:"住宅"}},[e._v("住宅")]),e._v(" "),r("Option",{attrs:{value:"商铺"}},[e._v("商铺")]),e._v(" "),r("Option",{attrs:{value:"别墅"}},[e._v("别墅")]),e._v(" "),r("Option",{attrs:{value:"花园洋房"}},[e._v("花园洋房")]),e._v(" "),r("Option",{attrs:{value:"商住楼"}},[e._v("商住楼")]),e._v(" "),r("Option",{attrs:{value:"写字楼"}},[e._v("写字楼")]),e._v(" "),r("Option",{attrs:{value:"公寓"}},[e._v("公寓")]),e._v(" "),r("Option",{attrs:{value:"其他"}},[e._v("其他")])],1)],1)],1),e._v(" "),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"建筑年代",prop:"user_post_year"}},[r("InputNumber",{attrs:{max:2080,min:0,formatter:function(e){return e+"年"},parser:function(e){return e.replace("年","")}},model:{value:e.formValidate.user_post_year,callback:function(t){e.$set(e.formValidate,"user_post_year",t)},expression:"formValidate.user_post_year"}})],1)],1)],1),e._v(" "),r("FormItem",{attrs:{label:"项目简介",prop:"user_post_content"}},[r("Input",{attrs:{type:"textarea",placeholder:"请填写项目简介"},model:{value:e.formValidate.user_post_content,callback:function(t){e.$set(e.formValidate,"user_post_content",t)},expression:"formValidate.user_post_content"}})],1),e._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.handleSubmit("formValidate")}}},[e.loading?r("span",[e._v("Loading...")]):r("span",[e._v("提交")])]),e._v(" "),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formValidate")}}},[e._v("重置")])],1)],1),e._v(" "),r("Col",{attrs:{offset:"2",span:"9"}},[r("FormItem",{attrs:{label:"户型标题",prop:"user_post_plot"}},[r("Input",{attrs:{placeholder:"请填写户型标题"},model:{value:e.formValidate.user_post_plot,callback:function(t){e.$set(e.formValidate,"user_post_plot",t)},expression:"formValidate.user_post_plot"}})],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"室",prop:"user_post_room"}},[r("InputNumber",{attrs:{max:10,min:1},model:{value:e.formValidate.user_post_room,callback:function(t){e.$set(e.formValidate,"user_post_room",t)},expression:"formValidate.user_post_room"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"厅",prop:"ting"}},[r("InputNumber",{attrs:{max:10,min:1},model:{value:e.formValidate.ting,callback:function(t){e.$set(e.formValidate,"ting",t)},expression:"formValidate.ting"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"8"}},[r("FormItem",{attrs:{label:"卫",prop:"wei"}},[r("InputNumber",{attrs:{max:10,min:1},model:{value:e.formValidate.wei,callback:function(t){e.$set(e.formValidate,"wei",t)},expression:"formValidate.wei"}})],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"共",prop:"user_post_floors"}},[r("InputNumber",{attrs:{max:100,min:1,formatter:function(e){return e+"层"},parser:function(e){return e.replace("层","")}},model:{value:e.formValidate.user_post_floors,callback:function(t){e.$set(e.formValidate,"user_post_floors",t)},expression:"formValidate.user_post_floors"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"第",prop:"user_post_floor"}},[r("InputNumber",{attrs:{max:100,min:0,formatter:function(e){return e+"层"},parser:function(e){return e.replace("层","")}},model:{value:e.formValidate.user_post_floor,callback:function(t){e.$set(e.formValidate,"user_post_floor",t)},expression:"formValidate.user_post_floor"}})],1)],1)],1),e._v(" "),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"图片上传",prop:"imgUpload"}},[e._l(e.uploadList,function(t){return r("div",{staticClass:"demo-upload-list"},["finished"===t.status?[r("img",{attrs:{src:t.url}}),e._v(" "),r("div",{staticClass:"demo-upload-list-cover"},[r("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(r){e.handleView(t.url)}}}),e._v(" "),e.shows?r("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(r){e.handleRemove(t)}}}):e._e()],1)]:[t.showProgress?r("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),e._v(" "),r("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:"/apis/publics/picture/imgouter",data:{location:"you"}}},[r("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[r("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),e._v(" "),r("Modal",{attrs:{title:"View Image",styles:{textAlign:"center"}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?r("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.imgName}}):e._e()])],2)],1)],1)],1)],1)],1)])],1)},staticRenderFns:[]};var p=r("VU/8")(n,u,!1,function(e){r("BNeI")},null,null);t.default=p.exports},"9bBU":function(e,t,r){r("mClu");var s=r("FeBl").Object;e.exports=function(e,t,r){return s.defineProperty(e,t,r)}},BNeI:function(e,t){},C4MV:function(e,t,r){e.exports={default:r("9bBU"),__esModule:!0}},bOdI:function(e,t,r){"use strict";t.__esModule=!0;var s,a=r("C4MV"),o=(s=a)&&s.__esModule?s:{default:s};t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},mClu:function(e,t,r){var s=r("kM2E");s(s.S+s.F*!r("+E39"),"Object",{defineProperty:r("evD5").f})},mvHQ:function(e,t,r){e.exports={default:r("qkKv"),__esModule:!0}},qkKv:function(e,t,r){var s=r("FeBl"),a=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}}});